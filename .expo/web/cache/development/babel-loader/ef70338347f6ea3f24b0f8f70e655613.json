{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ToastAndroid from \"react-native-web/dist/exports/ToastAndroid\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport React, { useState, useEffect } from 'react';\nimport { query, collection, onSnapshot, addDoc, deleteDoc, doc } from 'firebase/firestore';\nimport { db } from \"../firebase\";\nimport { Task } from \"../components\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar INPUT_PLACEHOLDER = 'Enter your order and hit Add';\nvar THEME = '#407BFF';\n\nvar _Dimensions$get = Dimensions.get('window'),\n    width = _Dimensions$get.width;\n\nvar HomeScreen = function HomeScreen() {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      task = _useState2[0],\n      setTask = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      taskList = _useState4[0],\n      setTaskList = _useState4[1];\n\n  useEffect(function () {\n    var taskQuery = query(collection(db, 'tasks'));\n    var subscriber = onSnapshot(taskQuery, function (snapshot) {\n      var tasks = [];\n      snapshot.forEach(function (doc) {\n        tasks.push(_objectSpread({\n          id: doc.id\n        }, doc.data()));\n      });\n      setTaskList([].concat(tasks));\n    });\n    return subscriber;\n  }, []);\n\n  var showRes = function showRes(text) {\n    ToastAndroid.show(text, ToastAndroid.SHORT);\n  };\n\n  var onSubmitHandler = function _callee() {\n    var taskRef;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(task.length === 0)) {\n              _context.next = 3;\n              break;\n            }\n\n            showRes('Task description cannot be empty!');\n            return _context.abrupt(\"return\");\n\n          case 3:\n            _context.prev = 3;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(addDoc(collection(db, 'tasks'), {\n              desc: task\n            }));\n\n          case 6:\n            taskRef = _context.sent;\n            console.log('completed', taskRef.id);\n            _context.next = 13;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](3);\n            console.log(_context.t0);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[3, 10]], Promise);\n  };\n\n  var onDeleteHandler = function _callee2(id) {\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(deleteDoc(doc(db, 'tasks', id)));\n\n          case 3:\n            console.log('successfully deleted!');\n            _context2.next = 9;\n            break;\n\n          case 6:\n            _context2.prev = 6;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(_context2.t0);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 6]], Promise);\n  };\n\n  var clearForm = function clearForm() {\n    setTask('');\n    Keyboard.dismiss();\n  };\n\n  return _jsx(KeyboardAvoidingView, {\n    style: {\n      flex: 1\n    },\n    behavior: Platform.OS === 'ios' ? 'padding' : null,\n    children: _jsxs(SafeAreaView, {\n      style: styles.container,\n      children: [_jsxs(View, {\n        style: styles.contentContainer,\n        children: [_jsx(Text, {\n          style: styles.headerText,\n          children: \"Your Orders \\uD83C\\uDF54\"\n        }), _jsx(View, {\n          style: styles.listContainer,\n          children: _jsx(FlatList, {\n            data: taskList,\n            renderItem: function renderItem(_ref) {\n              var item = _ref.item,\n                  index = _ref.index;\n              return _jsx(Task, {\n                data: item,\n                onDelete: onDeleteHandler\n              }, index);\n            },\n            style: styles.list,\n            showsVerticalScrollIndicator: false\n          })\n        })]\n      }), _jsxs(View, {\n        style: styles.formContainer,\n        children: [_jsx(TextInput, {\n          onChangeText: setTask,\n          value: task,\n          selectionColor: THEME,\n          placeholder: INPUT_PLACEHOLDER,\n          style: styles.taskInput\n        }), _jsx(Pressable, {\n          onPress: onSubmitHandler,\n          android_ripple: {\n            color: 'white'\n          },\n          style: styles.button,\n          children: _jsx(Text, {\n            style: styles.buttonText,\n            children: \"Add\"\n          })\n        })]\n      })]\n    })\n  });\n};\n\nexport default HomeScreen;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#FAF9F6'\n  },\n  contentContainer: {\n    flex: 1,\n    backgroundColor: '#FAF9F6'\n  },\n  listContainer: {\n    flex: 1,\n    paddingBottom: 70\n  },\n  list: {\n    overflow: 'scroll'\n  },\n  headerText: {\n    fontWeight: 'bold',\n    fontSize: 32,\n    marginLeft: 14,\n    marginTop: 14,\n    marginBottom: 10,\n    color: THEME\n  },\n  formContainer: {\n    position: 'absolute',\n    bottom: 0,\n    flexDirection: 'row',\n    paddingHorizontal: 14,\n    paddingVertical: 8,\n    backgroundColor: '#FAF9F6'\n  },\n  taskInput: {\n    width: width * 0.7,\n    borderWidth: 2,\n    borderRadius: 5,\n    borderColor: '#E0D4B0',\n    paddingVertical: 10,\n    paddingHorizontal: 12,\n    marginRight: 8\n  },\n  button: {\n    width: width * 0.22,\n    paddingVertical: 10,\n    paddingHorizontal: 6,\n    backgroundColor: THEME,\n    borderRadius: 5,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  buttonText: {\n    color: 'white'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","query","collection","onSnapshot","addDoc","deleteDoc","doc","db","Task","INPUT_PLACEHOLDER","THEME","Dimensions","get","width","HomeScreen","task","setTask","taskList","setTaskList","taskQuery","subscriber","snapshot","tasks","forEach","push","id","data","showRes","text","ToastAndroid","show","SHORT","onSubmitHandler","length","desc","taskRef","console","log","onDeleteHandler","clearForm","Keyboard","dismiss","flex","Platform","OS","styles","container","contentContainer","headerText","listContainer","item","index","list","formContainer","taskInput","color","button","buttonText","StyleSheet","create","backgroundColor","paddingBottom","overflow","fontWeight","fontSize","marginLeft","marginTop","marginBottom","position","bottom","flexDirection","paddingHorizontal","paddingVertical","borderWidth","borderRadius","borderColor","marginRight","justifyContent","alignItems"],"sources":["C:/Users/guokw/OneDrive/Documents/supper-snacks/src/screens/HomeScreen.js"],"sourcesContent":["import {\r\n    StyleSheet,\r\n    Text,\r\n    View,\r\n    SafeAreaView,\r\n    TextInput,\r\n    KeyboardAvoidingView,\r\n    Pressable,\r\n    Dimensions,\r\n    FlatList,\r\n    ToastAndroid,\r\n    Keyboard,\r\n} from 'react-native';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { query, collection, onSnapshot, addDoc, deleteDoc, doc } from 'firebase/firestore';\r\n\r\nimport { db } from '../firebase';\r\nimport { Task } from '../components';\r\n\r\nconst INPUT_PLACEHOLDER = 'Enter your order and hit Add';\r\nconst THEME = '#407BFF';\r\n\r\nconst { width } = Dimensions.get('window');\r\n\r\nconst HomeScreen = () => {\r\n    const [task, setTask] = useState('');\r\n    const [taskList, setTaskList] = useState([]);\r\n\r\n    useEffect(() => {\r\n        // Expensive operation. Consider your app's design on when to invoke this.\r\n        // Could use Redux to help on first application load.\r\n        // Todo: listen to firestore changes\r\n        const taskQuery = query(collection(db, 'tasks'));\r\n\r\n        const subscriber = onSnapshot(taskQuery, (snapshot) => {\r\n            const tasks = [];\r\n\r\n            snapshot.forEach(doc => {\r\n                tasks.push({ id: doc.id, ...doc.data() })\r\n            });\r\n\r\n            setTaskList([...tasks]);\r\n        });\r\n\r\n        return subscriber;\r\n    }, []);\r\n\r\n    const showRes = (text) => {\r\n        ToastAndroid.show(text, ToastAndroid.SHORT);\r\n    };\r\n\r\n    // https://firebase.google.com/docs/firestore/manage-data/add-data#web-version-9\r\n    // https://firebase.google.com/docs/firestore/manage-data/add-data#web-version-9_7\r\n    const onSubmitHandler = async () => {\r\n        if (task.length === 0) {\r\n            showRes('Task description cannot be empty!');\r\n            return;\r\n        }\r\n\r\n        // Todo\r\n        try {\r\n            const taskRef = await addDoc(collection(db, 'tasks'), {\r\n                desc: task,\r\n            });\r\n\r\n            console.log('completed', taskRef.id);\r\n        } catch (error) {\r\n            console.log(error);\r\n\r\n        }\r\n    };\r\n\r\n    const onDeleteHandler = async (id) => {\r\n        // Todo\r\n        try {\r\n            await deleteDoc(doc(db, 'tasks', id));\r\n\r\n            console.log('successfully deleted!')\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    };\r\n\r\n    const clearForm = () => {\r\n        setTask('');\r\n        Keyboard.dismiss();\r\n    };\r\n\r\n    return (\r\n        <KeyboardAvoidingView\r\n            style={{ flex: 1 }}\r\n            behavior={Platform.OS === 'ios' ? 'padding' : null}\r\n        >\r\n            <SafeAreaView style={styles.container}>\r\n                <View style={styles.contentContainer}>\r\n                    <Text style={styles.headerText}>Your Orders 🍔</Text>\r\n                    <View style={styles.listContainer}>\r\n                        <FlatList\r\n                            data={taskList}\r\n                            renderItem={({ item, index }) => (\r\n                                <Task\r\n                                    data={item}\r\n                                    key={index}\r\n                                    onDelete={onDeleteHandler}\r\n                                />\r\n                            )}\r\n                            style={styles.list}\r\n                            showsVerticalScrollIndicator={false}\r\n                        />\r\n                    </View>\r\n                </View>\r\n                <View style={styles.formContainer}>\r\n                    <TextInput\r\n                        onChangeText={setTask}\r\n                        value={task}\r\n                        selectionColor={THEME}\r\n                        placeholder={INPUT_PLACEHOLDER}\r\n                        style={styles.taskInput}\r\n                    />\r\n                    <Pressable\r\n                        onPress={onSubmitHandler}\r\n                        android_ripple={{ color: 'white' }}\r\n                        style={styles.button}\r\n                    >\r\n                        <Text style={styles.buttonText}>Add</Text>\r\n                    </Pressable>\r\n                </View>\r\n            </SafeAreaView>\r\n        </KeyboardAvoidingView>\r\n    );\r\n};\r\n\r\nexport default HomeScreen;\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        backgroundColor: '#FAF9F6',\r\n    },\r\n    contentContainer: {\r\n        flex: 1,\r\n        backgroundColor: '#FAF9F6',\r\n    },\r\n    listContainer: {\r\n        flex: 1,\r\n        paddingBottom: 70, // Fix: Temporary workaround\r\n    },\r\n    list: {\r\n        overflow: 'scroll',\r\n    },\r\n    headerText: {\r\n        fontWeight: 'bold',\r\n        fontSize: 32,\r\n        marginLeft: 14,\r\n        marginTop: 14,\r\n        marginBottom: 10,\r\n        color: THEME,\r\n    },\r\n    formContainer: {\r\n        position: 'absolute',\r\n        bottom: 0,\r\n        flexDirection: 'row',\r\n        paddingHorizontal: 14,\r\n        paddingVertical: 8,\r\n        backgroundColor: '#FAF9F6',\r\n    },\r\n    taskInput: {\r\n        width: width * 0.7,\r\n        borderWidth: 2,\r\n        borderRadius: 5,\r\n        borderColor: '#E0D4B0',\r\n        paddingVertical: 10,\r\n        paddingHorizontal: 12,\r\n        marginRight: 8,\r\n    },\r\n    button: {\r\n        width: width * 0.22,\r\n        paddingVertical: 10,\r\n        paddingHorizontal: 6,\r\n        backgroundColor: THEME,\r\n        borderRadius: 5,\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n    },\r\n    buttonText: {\r\n        color: 'white',\r\n    },\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}